import serial
import time

ser = serial.Serial('COM5', 9600, timeout=1)  
time.sleep(2)
print("Connected to Arduino.\n")
print("Commands:")
print("  manual  → switch to manual angle input mode")
print("  pot     → switch back to potentiometer mode")
print("  0–180   → set servo angle (manual mode only)")
print("  x       → exit\n")

try:
    while True:
        cmd = input("Enter command or angle: ")
        if cmd.lower() == 'x':
            break
        ser.write((cmd + '\n').encode())  # send with newline
        time.sleep(0.1)

        if ser.in_waiting > 0:
            print("Arduino:", ser.readline().decode().strip())

except KeyboardInterrupt:
    pass
finally:
    ser.close()
    print("Serial connection closed.")
